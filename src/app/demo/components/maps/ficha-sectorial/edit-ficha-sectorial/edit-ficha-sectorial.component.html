<ng-container *ngIf="model">
    <p-toast></p-toast>

    <ng-container *ngIf="load_form">
        <form
            [formGroup]="fichaSectorialForm"
            (ngSubmit)="editarFichaSectorial()"
        >
            <div class="flex flex-wrap">
                <div class="w-full lg:w-6 p-4 lg:p-7 surface-card">
                    <div class="flex flex-column gap-2 mx-auto">
                        <div class="field p-fluid">
                            <label htmlFor="firstname2"
                                >Dirección Geográfica</label
                            >
                            <input
                                pInputText
                                id="firstname2"
                                type="text"
                                formControlName="direccion_geo"
                                [placeholder]="
                                    fichaSectorialForm.get('direccion_geo')
                                        .value
                                "
                            />
                        </div>
                        <div class="field p-fluid">
                            <label htmlFor="firstname2"
                                >Actividad de Proyecto</label
                            >
                            <p-dropdown
                                id="actividad"
                                name="actividad"
                                formControlName="actividad"
                                [options]="actividadesProyecto"
                                optionLabel="nombre"
                                [placeholder]="
                                    fichaSectorialForm.get('actividad').value
                                        ?.nombre
                                "
                            ></p-dropdown>
                        </div>
                        <div class="field p-fluid">
                            <label htmlFor="firstname2"
                                >Fecha del Evento:</label
                            >
                            <p-calendar
                                [touchUI]="isMobil()"
                                [readonlyInput]="isMobil()"
                                id="fecha_evento"
                                name="fecha_evento"
                                formControlName="fecha_evento"
                                [showTime]="true"
                                [showIcon]="true"
                                appendTo="body"
                                inputId="buttondisplay"
                                [placeholder]="
                                    fichaSectorialForm.get('fecha_evento').value
                                        | date : 'dd/MM/yyyy, hh:mm a'
                                "
                                [locale]="{
                                    firstDayOfWeek: 1,
                                    dayNames: [
                                        'Domingo',
                                        'Lunes',
                                        'Martes',
                                        'Miércoles',
                                        'Jueves',
                                        'Viernes',
                                        'Sábado'
                                    ],
                                    dayNamesShort: [
                                        'Dom',
                                        'Lun',
                                        'Mar',
                                        'Mié',
                                        'Jue',
                                        'Vie',
                                        'Sáb'
                                    ],
                                    dayNamesMin: [
                                        'Do',
                                        'Lu',
                                        'Ma',
                                        'Mi',
                                        'Ju',
                                        'Vi',
                                        'Sá'
                                    ],
                                    monthNames: [
                                        'Enero',
                                        'Febrero',
                                        'Marzo',
                                        'Abril',
                                        'Mayo',
                                        'Junio',
                                        'Julio',
                                        'Agosto',
                                        'Septiembre',
                                        'Octubre',
                                        'Noviembre',
                                        'Diciembre'
                                    ],
                                    monthNamesShort: [
                                        'Ene',
                                        'Feb',
                                        'Mar',
                                        'Abr',
                                        'May',
                                        'Jun',
                                        'Jul',
                                        'Ago',
                                        'Sep',
                                        'Oct',
                                        'Nov',
                                        'Dic'
                                    ]
                                }"
                                hourFormat="12"
                            ></p-calendar>
                        </div>
                    </div>
                </div>
                <div class="w-full lg:w-6 p-4 lg:p-7">
                    <div class="field p-fluid">
                        <div class="mb-3">
                            <label htmlFor="firstname2"
                                >Estado de Actividad de Proyecto</label
                            >
                            <p-dropdown
                                id="estado"
                                name="estado"
                                formControlName="estado"
                                [options]="estadosActividadProyecto"
                                optionLabel="nombre"
                            ></p-dropdown>
                        </div>
                    </div>
                    <div class="field p-fluid">
                        <label htmlFor="firstname2">Descripción</label>
                        <textarea
                            rows="5"
                            cols="25"
                            pInputTextarea
                            id="descripcion"
                            name="descripcion"
                            formControlName="descripcion"
                            required
                        ></textarea>
                    </div>
                    <div class="field p-fluid">
                        <label htmlFor="firstname2">Observación</label>
                        <textarea
                            rows="5"
                            cols="25"
                            pInputTextarea
                            class="form-control"
                            id="observacion"
                            name="observacion"
                            formControlName="observacion"
                        ></textarea>
                    </div>
                </div>
            </div>

            <p-button
                label="Registrar"
                type="submit"
                icon="bi bi-save"
            ></p-button>
        </form>
    </ng-container>
    <ng-container *ngIf="!load_form">
        <div class="text-center">
            <div class="spinner-border text-success" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
        </div>
    </ng-container>
</ng-container>
